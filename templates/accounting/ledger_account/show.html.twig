{% extends 'acct-base.html.twig' %}

{% block title %}Ledger Account{% endblock %}

{% block content %}
    {{  parent() }}   
    <h1>Ledger Account</h1>

    <div class="trans-list">
        <div class="row">
            <div class="col-sm-2 heading">Id</div>
            <div class="col-sm-10">{{ ledger_account.id }}</div>
        </div>
        <div class="row">
            <div class="col-sm-2 heading">Name</div>
            <div class="col-sm-10">{{ ledger_account.name }}</div>
        </div>
        <div class="row">
            <div class="col-sm-2 heading">Balance</div>
            <div class="col-sm-10">{{ ledger_account.balance }}</div>
        </div>
        <hr>
        <div class="row">
            <div class="col-sm-2 heading">Account Ledger</div>
            <div class="col-sm-10">
                <div class="row" id="accountDebits">
                    <div class="row heading">
                        <div class="col-sm-2">Action</div><div class="col-sm-1 right">Date</div><div class="col-sm-2 right">Amount</div><div class="col-sm-4">Other Acct</div>
                    </div>
                    <hr>
                    {% for transaction in transactions %}
                        <div class="row">
                            <div class="col-sm-2 left"><a href={{ path('accounting_transaction_show',{'id':transaction.id}) }}>View</a></div>
                            <div class="col-sm-1 right">{{ transaction.date|date("n-j-y")}}</div>
                            {% if ledger_account.type.isDebit %}
                                {% if transaction.creditAccount == ledger_account %}
                                    <div class="col-sm-2 right">-${{ transaction.amount}}</div>
                                    <div class="col-sm-4 left"><a href="{{ path('accounting_ledger_account_show', {'id': transaction.debitAccount.id}) }}">{{ transaction.debitAccount.name }}</a></div>
                                    {% else %}
                                    <div class="col-sm-2 right">${{ transaction.amount}}</div>
                                    <div class="col-sm-4 left"><a href="{{ path('accounting_ledger_account_show', {'id': transaction.creditAccount.id}) }}">{{ transaction.creditAccount.name }}</a></div>
                                    {%  endif %}
                                {% else %}
                                    {% if transaction.debitAccount == ledger_account %}
                                    <div class="col-sm-2 right">${{ transaction.amount}}</div>
                                    <div class="col-sm-4 left"><a href="{{ path('accounting_ledger_account_show', {'id': transaction.creditAccount.id}) }}">{{ transaction.creditAccount.name }}</a></div>
                                    {% else %}
                                    <div class="col-sm-2 right">-${{ transaction.amount}}</div>
                                    <div class="col-sm-4 left"><a href="{{ path('accounting_ledger_account_show', {'id': transaction.debitAccount.id}) }}">{{ transaction.debitAccount.name }}</a></div>
                                    {%  endif %}
                                {% endif %}
                        </div>
                    {%  endfor %}
                </div>
            </div>
        </div>
        <hr>

        <a href="{{ path('accounting_ledger_account_index') }}">back to list</a>

        <a href="{{ path('accounting_ledger_account_edit', {'id': ledger_account.id}) }}">edit</a>

        {{ include('accounting/ledger_account/_delete_form.html.twig') }}
    {% endblock %}
