{% extends 'admin-base.html.twig' %}

{% block title %}Admin Dashboard!{% endblock %}

{% block content %}
    {{  parent() }}
    <div class="wrapper">
        <h1>Admin Dashboard for {{ app.user.name }}</h1>
        <div class="section-break">&nbsp;</div>
        <div class="container">
            <div class="row">
                <h4>Active HOA:  {{ activeHoa }} 
                    <a class="btn btn-primary" role="button" href="{{ path("user_select_hoa", {'target': app.request.attributes.get('_route')}) }}">Change</a>
                </h4>
            </div>
            <div class="row">
                <div class="col-sm card">
                    <div class=card-header>
                        <span>Account Balances</span>
                        <span><a class="btn btn-primary" role="button" href="{{ path('accounting_transaction_new') }}">Add Transaction</a>
                    </div>
                    <div class="cardlist-body">                        
                        <div class="">
                            {{  include('accounting/transaction/transactionTable.html.twig',{'accounts': activeHoa.ledgerAccounts }) }}
                        </div>
                    </div>
                </div>
                <div class="col-sm card">
                    <div class=card-header>Open Service Requests</div>
                    <div class="cardlist-body">                        
                        <div class="row">
                            <div class="row">
                                <div class="col-sm">
                                    Unit 215
                                </div>
                                <div class="col-sm">
                                    Window Leak
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm card">
                    <div class=card-header>Unit Information</div>
                    <div class="cardlist-body">                        
                        {% for building, cnt in unitCnts %}
                            {%  if building != "Total" %}
                                <div class="row">
                                    <div class="col-sm left">
                                        {{ cnt }} Units in Building <strong>{{ building }}</strong><br>
                                    </div>
                                </div>
                            {%  endif %}
                        {%  endfor %}
                        <div class="row">
                            <div class="col-sm left">
                                {{ unitCnts.Total }} Units in <strong> All Buildings</strong><br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
